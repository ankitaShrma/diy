'use strict';

const co = require('co');

co(function*() {
  var ReplSet = require('mongodb-topology-manager').ReplSet;

  // Create new instance
  var topology = new ReplSet('mongod', [{
    // mongod process options
    options: {
<<<<<<< HEAD
      bind_ip: 'localhost', port: 31000, dbpath: `/data/db/31000`
=======
      bind_ip: 'localhost', port: 31000, dbpath: `~/data/db/31000`
>>>>>>> ec8051100d234fe9175dcd73a88d8192aa153d52
    }
  }, {
    // mongod process options
    options: {
<<<<<<< HEAD
      bind_ip: 'localhost', port: 31001, dbpath: `/data/db/31001`
=======
      bind_ip: 'localhost', port: 31001, dbpath: `~/data/db/31001`
>>>>>>> ec8051100d234fe9175dcd73a88d8192aa153d52
    }
  }, {
    // Type of node
    arbiterOnly: true,
    // mongod process options
    options: {
<<<<<<< HEAD
      bind_ip: 'localhost', port: 31002, dbpath: `/data/db/31002`
=======
      bind_ip: 'localhost', port: 31002, dbpath: `~/data/db/31002`
>>>>>>> ec8051100d234fe9175dcd73a88d8192aa153d52
    }
  }], {
    replSet: 'rs'
  });

  yield topology.start();

  console.log('done');
}).catch(error => {
  console.error(error);
  process.exit(-1);
});
